<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Alternative Ways | Home</title>

  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/png" href="Resources/AW-Icon.png" />
  <meta name="theme-color" content="#070818" />
  <meta http-equiv="ScreenOrientation" content="autoRotate:disabled" />

  <style>
    :root{
      --topbarH: 78px;
      --container: 1140px;

      --bg0:#070818;
      --bg1:#090a22;

      --text: rgba(245,246,255,.94);
      --muted: rgba(245,246,255,.68);

      --border: rgba(245,246,255,.12);
      --card: rgba(255,255,255,.05);

      --violet: #7c3aed;
      --cyan: #22d3ee;

      --shadow: 0 22px 70px rgba(0,0,0,.55);
      --radius: 18px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
      background:
        radial-gradient(1200px 700px at 20% -10%, rgba(124,58,237,.14), transparent 60%),
        radial-gradient(900px 600px at 90% 10%, rgba(34,211,238,.10), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      color: var(--text);
      overflow-x:hidden;
    }
    a{ color:inherit; text-decoration:none; }

    /* =========================
       HERO — Desktop: full-screen cinematic
       Mobile: poster (full image visible, 100% width)
       ========================= */
    .HeroAW{
      position: relative;

      /* FULL BLEED */
      width: 100vw;
      left: 50%;
      right: 50%;
      margin-left: -50vw;
      margin-right: -50vw;

      background: #070818;
      border-bottom: 1px solid rgba(245,246,255,.08);
      isolation: isolate;

      /* Desktop default */
      min-height: 100svh;
    }

    .HeroAW__media{
      position: absolute;
      inset: 0;
      overflow: hidden;
    }

    .HeroAW__img{
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;      /* Desktop: cinematic */
      object-position: center;
      display:block;
      background: #070818;

      transform: scale(1.03);
      filter: saturate(1.08) contrast(1.08) brightness(.92);
    }

    .HeroAW__shade{
      position:absolute;
      inset: 0;
      pointer-events:none;
      background:
        radial-gradient(1200px 700px at 70% 25%, rgba(124,58,237,.22), transparent 60%),
        radial-gradient(900px 600px at 20% 20%, rgba(34,211,238,.12), transparent 55%),
        linear-gradient(180deg,
          rgba(7,8,24,.10) 0%,
          rgba(7,8,24,.55) 55%,
          rgba(7,8,24,.92) 92%,
          rgba(7,8,24,.98) 100%
        );
    }

    .HeroAW::after{
      content:"";
      position:absolute;
      inset:-2px;
      pointer-events:none;
      background: radial-gradient(900px 520px at 50% 20%, transparent 40%, rgba(0,0,0,.22) 75%, rgba(0,0,0,.45) 100%);
      mix-blend-mode: multiply;
      opacity: .85;
    }

    .HeroAW__content{
      position: relative;
      z-index: 3;

      width: min(var(--container), calc(100% - 36px));
      margin: 0 auto;

      min-height: 100svh;
      display: grid;
      align-content: end;

      padding: calc(var(--topbarH) + 28px) 0 64px;
      gap: 12px;
    }

    .HeroAW__badge{
      width: fit-content;
      display:inline-flex;
      align-items:center;
      gap: 10px;
      height: 34px;
      padding: 0 14px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 950;
      letter-spacing: 1px;
      text-transform: uppercase;
      color: rgba(245,246,255,.92);
      background: linear-gradient(90deg, rgba(124,58,237,.24), rgba(34,211,238,.18));
      box-shadow: 0 0 0 1px rgba(245,246,255,.18) inset, 0 18px 50px rgba(0,0,0,.35);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);

      margin-left: 20px;
    }
    .HeroAW__badge::before{
      content:"";
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.9), rgba(255,255,255,.2));
      box-shadow: 0 0 20px rgba(124,58,237,.65);
      opacity: .95;
    }

    .HeroAW__title{
      margin: 0;
      margin-left: 20px;
      font-size: clamp(30px, 5vw, 56px);
      font-weight: 1000;
      line-height: 1.03;
      letter-spacing: .2px;
      text-shadow: 0 16px 60px rgba(0,0,0,.65);
    }
    .HeroAW__title span{
      background: linear-gradient(90deg, rgba(245,246,255,.98), rgba(245,246,255,.80));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .HeroAW__text{
      margin: 0;
      margin-left: 20px;
      max-width: 72ch;
      color: rgba(245,246,255,.80);
      font-size: 15.8px;
      line-height: 1.62;
      text-shadow: 0 16px 60px rgba(0,0,0,.65);
    }

    /* =========================
       MOBILE FIX: poster layout
       ========================= */
    @media (max-width: 720px){
      .HeroAW{ min-height: unset; }

      .HeroAW__media{
        position: relative;
        inset: auto;
      }

      .HeroAW__img{
        position: relative;
        inset: auto;
        width: 100%;
        height: auto;
        object-fit: contain;
        transform: none;
        filter: saturate(1.05) contrast(1.05) brightness(.95);
      }

      .HeroAW__content{
        width: calc(100% - 28px);
        min-height: unset;
        padding: 16px 0 28px;
        align-content: start;
      }

      .HeroAW__text{ font-size: 15.2px; }
    }

    /* =========================
       EVENTS
       ========================= */
    .Page{
      width: min(var(--container), calc(100% - 36px));
      margin: 0 auto;
      padding: 34px 0 56px;
    }

    .SectionHead{
      display:flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 14px;
    }
    .SectionTitle{
      margin: 0;
      margin-left: 20px;
      font-size: 18px;
      font-weight: 950;
      letter-spacing: .2px;
    }
    .SectionSub{
      margin: 0;
      margin-left: 20px;
      color: var(--muted);
      font-size: 13.5px;
    }

    .AWEvents{
      border-radius: 22px;
      border: 1px solid rgba(245,246,255,.12);
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
      box-shadow: var(--shadow);
      overflow: hidden;
      position: relative;
    }
    .AWEvents::before{
      content:"";
      position:absolute;
      inset:-1px;
      pointer-events:none;
      background:
        radial-gradient(700px 380px at 20% 0%, rgba(124,58,237,.18), transparent 60%),
        radial-gradient(700px 380px at 90% 20%, rgba(34,211,238,.10), transparent 60%);
      opacity: .9;
    }

    .AWEvents__note{
      position: relative;
      z-index: 1;
      padding: 14px 16px 12px;
      color: rgba(245,246,255,.72);
      font-size: 14px;
      line-height: 1.45;
      border-bottom: 1px solid rgba(245,246,255,.10);
      background: rgba(0,0,0,.18);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .AWEvents__list{
      position: relative;
      z-index: 1;
      padding: 14px;
      display: grid;
      gap: 12px;
    }

    .AWEvent{
      border-radius: 18px;
      border: 1px solid rgba(245,246,255,.12);
      background: rgba(255,255,255,.04);
      padding: 14px;
      display: grid;
      grid-template-columns: 110px 1fr;
      gap: 14px;
      align-items: center;
      transition: transform .18s ease, border-color .18s ease, background .18s ease;
      position: relative;
      overflow: hidden;
    }
    .AWEvent::before{
      content:"";
      position:absolute;
      inset:-1px;
      background: linear-gradient(120deg, rgba(124,58,237,.14), transparent 40%, rgba(34,211,238,.10));
      opacity: 0;
      transition: opacity .18s ease;
      pointer-events:none;
    }
    .AWEvent:hover{
      transform: translateY(-2px);
      border-color: rgba(245,246,255,.20);
      background: rgba(255,255,255,.06);
    }
    .AWEvent:hover::before{ opacity: 1; }

    .AWEvent__date{
      border-radius: 16px;
      padding: 12px 10px;
      text-align: center;
      border: 1px solid rgba(124,58,237,.30);
      background: linear-gradient(180deg, rgba(124,58,237,.20), rgba(255,255,255,.04));
      box-shadow: 0 18px 50px rgba(0,0,0,.35);
    }
    .AWEvent__day{ font-size: 30px; font-weight: 1000; line-height: 1; }
    .AWEvent__mon{
      margin-top: 6px;
      font-size: 12px;
      font-weight: 950;
      letter-spacing: 1px;
      text-transform: uppercase;
      opacity: .95;
    }
    .AWEvent__year{ margin-top: 2px; font-size: 12px; color: rgba(245,246,255,.72); }

    .AWEvent__name{
      font-weight: 1000;
      font-size: 16px;
      line-height: 1.2;
      letter-spacing: .2px;
    }
    .AWEvent__meta{
      margin-top: 6px;
      color: rgba(245,246,255,.82);
      font-size: 13.5px;
      line-height: 1.35;
      display:flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .AWPill{
      display:inline-flex;
      align-items:center;
      height: 26px;
      padding: 0 10px;
      border-radius: 999px;
      border: 1px solid rgba(245,246,255,.12);
      background: rgba(0,0,0,.16);
      color: rgba(245,246,255,.84);
      font-weight: 850;
      font-size: 12px;
      letter-spacing: .2px;
      white-space: nowrap;
    }
    .AWEvent__desc{
      margin-top: 8px;
      color: rgba(245,246,255,.66);
      font-size: 13.5px;
      line-height: 1.45;
      white-space: pre-line;
    }

    .AWEmpty{
      padding: 18px 16px;
      color: rgba(245,246,255,.70);
      font-size: 14px;
    }

    @media (max-width: 720px){
      .Page{ width: calc(100% - 28px); }
      .AWEvents__list{ padding: 12px; }
      .AWEvent{ grid-template-columns: 1fr; }
      .AWEvent__date{
        text-align: left;
        display: flex;
        gap: 12px;
        align-items: center;
        justify-content: flex-start;
      }
      .AWEvent__day{ font-size: 24px; }
      .AWEvent__mon, .AWEvent__year{ margin-top: 0; }
    }
  </style>
</head>

<body>
  <!-- Header via FixedPages -->
  <div id="HeadBar"></div>

  <!-- HERO -->
  <section class="HeroAW" aria-label="Hero">
    <div class="HeroAW__media" aria-hidden="true">
      <img class="HeroAW__img" src="Resources/TitlePic.png" alt="" />
      <div class="HeroAW__shade"></div>
    </div>

    <div class="HeroAW__content">
      <div class="HeroAW__badge">ALTERNATIVE WAYS</div>
      <h1 class="HeroAW__title"><span>Progressive Metal</span> from Speyer</h1>
      <p class="HeroAW__text">Instrumental. Heavy. Precise.</p>
    </div>
  </section>

  <!-- EVENTS -->
  <main class="Page">
    <section id="events" aria-label="Events">
      <div class="SectionHead">
        <div>
          <h2 class="SectionTitle">Hear us live</h2>
          <p class="SectionSub">All calendar dates</p>
        </div>
      </div>

      <div class="AWEvents">
        <div class="AWEvents__note">
          This list is synced with our Google Calendar.
        </div>

        <div class="AWEvents__list" id="AWEventsList">
          <div class="AWEmpty" id="AWEventsStatus">Loading events…</div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer via FixedPages -->
  <div id="FootBar"></div>

  <!-- libs -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>
    $("#HeadBar").load("FixedPages/HeadBar.html?cb=" + Date.now());
    $("#FootBar").load("FixedPages/FootBar.html?cb=" + Date.now());
  </script>

  <!-- Calendar loader (JSONP) -->
  <script>
    // 1) Paste your deployed Apps Script Web App URL here (see steps below)
    const AW_CAL_API = "https://script.google.com/macros/s/AKfycbxiGR0al4G5foFDZQQrmNj6WCo_VG-mR8rDSD2xSSBPMW4TIdG6ad9_fnDVKDUGUGtE/exec";

    const AWCal = (() => {
      const elList = () => document.getElementById("AWEventsList");
      const elStatus = () => document.getElementById("AWEventsStatus");

      const esc = (s) => String(s ?? "").replace(/[&<>"']/g, c => ({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"
      }[c]));

      const pad2 = (n) => String(n).padStart(2,"0");
      const mon = (d) => ["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][d.getMonth()];

      function fmtTimeRange(ev){
        if (ev.allDay) return "All day";
        const s = new Date(ev.start);
        const e = new Date(ev.end);
        return `${pad2(s.getHours())}:${pad2(s.getMinutes())}` + (e && (e - s) > 0 ? `–${pad2(e.getHours())}:${pad2(e.getMinutes())}` : "");
      }

      function pill(text){
        return `<span class="AWPill">${esc(text)}</span>`;
      }

      function render(events){
        const list = elList();
        list.innerHTML = "";

        if (!events || !events.length){
          list.innerHTML = `<div class="AWEmpty">No events found.</div>`;
          return;
        }

        // Sort ascending by start
        events.sort((a,b) => new Date(a.start) - new Date(b.start));

        for (const ev of events){
          const s = new Date(ev.start);

          const day = pad2(s.getDate());
          const month = mon(s);
          const year = s.getFullYear();

          const pills = [
            pill(fmtTimeRange(ev)),
            ev.city ? pill(ev.city) : "",
            ev.location ? pill(ev.location) : "",
          ].filter(Boolean).join("");

          const descBits = [];
          if (ev.description) descBits.push(ev.description);
          if (ev.url) descBits.push(`More: ${ev.url}`);
          const desc = descBits.length ? esc(descBits.join("\n")) : "—";

          list.insertAdjacentHTML("beforeend", `
            <div class="AWEvent">
              <div class="AWEvent__date">
                <div class="AWEvent__day">${esc(day)}</div>
                <div class="AWEvent__mon">${esc(month)}</div>
                <div class="AWEvent__year">${esc(year)}</div>
              </div>
              <div class="AWEvent__info">
                <div class="AWEvent__name">${esc(ev.title || "Event")}</div>
                <div class="AWEvent__meta">${pills}</div>
                <div class="AWEvent__desc">${desc}</div>
              </div>
            </div>
          `);
        }
      }

      function jsonp(url){
        return new Promise((resolve, reject) => {
          const cbName = "AWCal_cb_" + Math.random().toString(36).slice(2);
          const script = document.createElement("script");
          const timeout = setTimeout(() => {
            cleanup();
            reject(new Error("Calendar request timed out"));
          }, 15000);

          function cleanup(){
            clearTimeout(timeout);
            script.remove();
            try { delete window[cbName]; } catch(e){ window[cbName] = undefined; }
          }

          window[cbName] = (data) => { cleanup(); resolve(data); };
          script.onerror = () => { cleanup(); reject(new Error("Calendar request failed")); };

          const sep = url.includes("?") ? "&" : "?";
          script.src = `${url}${sep}callback=${encodeURIComponent(cbName)}&mode=all`;
          document.body.appendChild(script);
        });
      }

      async function load(){
        const status = elStatus();
        if (status) status.textContent = "Loading events…";

        try{
          const data = await jsonp(AW_CAL_API);
          if (!data || data.ok !== true) throw new Error(data?.error || "Unknown calendar error");
          render(data.events || []);
        }catch(err){
          console.error(err);
          const list = elList();
          list.innerHTML = `<div class="AWEmpty">Could not load events. (${esc(err.message)})</div>`;
        }
      }

      return { load };
    })();

    // fire
    AWCal.load();
  </script>
</body>
</html>
